{% extends "base.html.twig" %}

{% block title %}Index{% endblock %}

{% block content %}
    <a href="create.php" class="btn-add">Ajouter un livre</a>
    {# Page principale #}
    <h1>Liste des manuscrits de la bibliothèque du Patrimoine de Clermont Auvergne Métropole</h1>

    <table>
        <caption>Table listant l'ensemble des entrées de la BDD</caption>
        <tr>
            <th>Référence</th>
            <th>Titre</th>
            <th>Auteur</th>
            <th>Actions</th>
        </tr>
        {% for document in list %}
            <tr>
                <td>{{ document._id }}</td>
                <td>{{ document.titre }}</td>
                <td>{{ document.auteur }}</td>
                <td>
                    <a href="get.php?id={{ document._id }}">voir</a>&nbsp;/&nbsp;
                    <a href="edit.php?id={{ document._id }}">éditer</a>&nbsp;/&nbsp;
                    <a href="delete.php?id={{ document._id }}">supprimer</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="4">Aucun manuscrit trouvé.</td>
            </tr>
        {% endfor %}
    </table>

    {# BARRE DE NAVIGATION #}
    {% if maxPages > 1 %}
        <div class="pagination" style="margin-top: 20px; display: flex; justify-content: center; align-items: center; gap: 10px;">

            {# Bouton Précédent #}
            {% if page > 1 %}
                <a href="?page=1" title="Première page">&laquo;&laquo;</a>
                <a href="?page={{ page - 1 }}" title="Page précédente">&laquo; Précédent</a>
            {% else %}
                <span style="color: grey; opacity: 0.5;">&laquo;&laquo;</span>
                <span style="color: grey; opacity: 0.5;">&laquo; Précédent</span>
            {% endif %}

            {# Formulaire de saut direct #}
            <form action="" method="GET" style="margin: 0;">
                <label for="pageInput">Page :</label>
                <input type="number"
                       name="page"
                       id="pageInput"
                       value="{{ page }}"
                       min="1"
                       max="{{ maxPages }}"
                       style="width: 50px; text-align: center;">

                <span> / {{ maxPages }}</span>
                <button type="submit">Aller</button>
            </form>

            {# Bouton Suivant #}
            {% if page < maxPages %}
                <a href="?page={{ page + 1 }}" title="Page suivante">Suivant &raquo;</a>
                <a href="?page={{ maxPages }}" title="Dernière page">&raquo;&raquo;</a>
            {% else %}
                <span style="color: grey; opacity: 0.5;">Suivant &raquo;</span>
                <span style="color: grey; opacity: 0.5;">&raquo;&raquo;</span>
            {% endif %}

        </div>
    {% endif %}
{% endblock %}